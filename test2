    # IMPORTANT: When showing the main menu, always reset transient flow state.
    # This prevents stale Assign-PCP/Specialist state from leaking into a new menu selection.
    for k in [
        # PCP flow
        "termination_reason",
        "knows_provider",
        "raw_provider_input",
        "raw_filter_input",
        "providers_result",
        "last_followup_action",
        "initial_assign_text",
        "provider_id",
        "provider_name",
        "provider_city",
        "provider_state",
        "last_selected_provider_id",
        "selected_provider_snapshot",
        "active_provider_id",
        "active_eff_dt",
        "startingLocationZip",
        "asOfDate",

        # Specialist flow bits
        "flow",
        "specialist_service_specialty",
        "specialist_raw_filter_input",
        "specialist_raw_filter_input",  # safe even if repeated
        "specialist_service_specialty",  # safe even if repeated
    ]:
        state.pop(k, None)

    # Keep NPI reset here too (safe; menu should start clean)
    for k in ["npi_results_payload", "npi_mode", "npi_query", "npi_origin", "npi_target_flow", "provider_id_override"]:
        state.pop(k, None)
